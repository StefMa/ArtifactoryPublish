# ArtifactoryPublish Development

## Plugin dependencies
### AndroidArtifacts
We are using the [AndroidArtifacts](https://github.com/StefMa/AndroidArtifacts/) to generate the [Gradle publications](https://docs.gradle.org/current/userguide/publishing_maven.html)
for us. This plugin will only use the generated **publications** and streamline the process over the "original" [Artifactory plugin](https://www.jfrog.com/confluence/display/RTF/Gradle+Artifactory+Plugin).

### Artifactory Plugin
As already mentioned above we use the [Artifactory plugin](https://www.jfrog.com/confluence/display/RTF/Gradle+Artifactory+Plugin).
Basically this plugin will only setup some default properties for you for this plugin. See the [`ArtifactoryPublishConfiguration` class](https://github.com/StefMa/ArtifactoryPublish/blob/1341ccdc82d1034151aab68ccefb7568e0bbb471/src/main/groovy/guru/stefma/artifactorypublish/ArtifactoryPublishConfiguration.groovy).

## Tasks
Because we depend on the [AndroidArtifacts plugin](https://github.com/StefMa/AndroidArtifacts/) the same tasks are available in this plugin
as in the AndroidArtifacts plugin. Checkout the [DEVELOPMENT.md](https://github.com/StefMa/AndroidArtifacts/blob/e90023b015f40ea0f268bd44df9280cacd7ca481/DEVELOPMENT.md) their 
to see a list of available task and what they do.

Because we apply the **Artifactory plugin** the task `artifactoryPublish` will also be exposed.
The task will publish - by default - the `releaseAar` publication (generated by the **AndroidArtifacts plugin**) to the 
Artifactory

## Testing
Since we test this plugin if it can successfully publish a artifact to a running instance of Artifactory you have to make sure
that there **is a running instance** of Artifactory **before** executing the tests.

You can simply use the **Artifactory docker** image:
```
docker run --name artifactory -d -p 8081:8081 docker.bintray.io/jfrog/artifactory-oss:latest
```
You can also checkout the [**consumer README**](consumer/README.md) for more information.
